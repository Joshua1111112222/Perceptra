<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="apple-mobile-web-app-title" content="Perceptra">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="apple-touch-icon" href="\logo.png">
    <link rel="icon" href="\logo.png">
    <meta name="theme-color" content="#ffffff"> <!-- Android Chrome -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="style.css">
    <style>
        /* Add this CSS to style the Perceptra heading */
        .perceptra-heading {
            color: #662d91; /* Replace with the desired color */
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Static Perceptra heading (visible on login page) -->
        <h1 id="static-heading" class="perceptra-heading" style="display: none;">Perceptra</h1>

        <!-- Updated heading with a span for dynamic username -->
        <h2 id="welcome-message" class="perceptra-heading">Perceptra</h2>

        <!-- Username Section -->
        <div id="username-section">
            <label for="username">Enter your Username:</label>
            <input type="text" id="username" placeholder="Your Username">
            <button onclick="nextStep()">Next</button>
        </div>

        <!-- Team Info Section -->
        <div id="team-section" class="hidden">
            <label for="team-name">Enter Team Name:</label>
            <input type="text" id="team-name" placeholder="Team Name">

            <label for="team-number">Enter Team Number:</label>
            <input type="number" id="team-number" placeholder="Team Number">

            <div class="ratings">
                <label>Rate the Team (1-10):</label>
                <input type="number" id="defense" placeholder="Defense" min="1" max="10">
                <input type="number" id="strategy" placeholder="Strategy" min="1" max="10">
                <input type="number" id="effectiveness" placeholder="Effectiveness" min="1" max="10">
                <input type="number" id="drive-skill" placeholder="Drive Skill" min="1" max="10">
                <input type="number" id="scoring" placeholder="Scoring" min="1" max="10">
                <input type="number" id="consistency" placeholder="Consistency" min="1" max="10">
            </div>

            <textarea id="notes" placeholder="Additional Notes"></textarea>
            <button onclick="submitData()">Submit</button>
            <!-- Back Button -->
            <button onclick="goBack()">Back</button>
        </div>

        <!-- Admin Login -->
        <div id="admin-login">
            <button onclick="showAdmin()">Admin</button>
        </div>

        <div id="admin-section" class="hidden">
            <label for="admin-password">Enter Admin Password:</label>
            <input type="password" id="admin-password" placeholder="1234567sorrysorry123456">
            <button onclick="accessAdmin()">Submit</button>
        </div>

        <!-- Upload Button -->
        <div id="upload-section">
            <button id="upload-btn" onclick="uploadData()">Upload (<span id="forms-count">0</span>)</button>
        </div>

        <!-- Rankings Section -->
        <div id="rankings-section" class="hidden">
            <h2>Rankings</h2>
            <table id="rankings-table">
                <thead>
                    <tr>
                        <th>Team Name</th>
                        <th>Team Number</th>
                        <th>Avg Score</th>
                        <th>Highest Score</th>
                        <th>Submitted By</th>
                        <th>Defense</th>
                        <th>Strategy</th>
                        <th>Effectiveness</th>
                        <th>Drive Skill</th>
                        <th>Scoring</th>
                        <th>Consistency</th>
                        <th>Notes</th>
                        <th>Actions</th> <!-- Added Actions column for the delete button -->
                    </tr>
                </thead>
                <tbody id="rankings-body"></tbody>
            </table>
            <!-- Clear History Button -->
            <button id="clear-history-btn" class="hidden" onclick="clearHistory()">Clear History</button>
        </div>
    </div>

    <script>
        // List of allowed usernames
        const allowedUsernames = ["Joshua", "Alice", "Bob", "Charlie", "Diana"]; // Add the names of registered users here

        function nextStep() {
            const usernameInput = document.getElementById("username");
            const username = usernameInput.value.trim();

            if (allowedUsernames.includes(username)) {
                // Update the heading with the personalized message
                const heading = document.getElementById("welcome-message");
                heading.innerText = `Welcome back, ${username}`;

                // Show the static "Perceptra" heading
                document.getElementById("static-heading").style.display = "block";

                // Hide the username section and show the team section
                document.getElementById("username-section").classList.add("hidden");
                document.getElementById("team-section").classList.remove("hidden");
            } else {
                alert("Sorry, you are not currently registered on The Atomic Toasters Robotics team. To register, please contact Joshua or a mentor.");
            }
        }

        function goBack() {
            // Hide the team section and show the username section
            document.getElementById("team-section").classList.add("hidden");
            document.getElementById("username-section").classList.remove("hidden");

            // Hide the static "Perceptra" heading
            document.getElementById("static-heading").style.display = "none";

            // Reset the welcome message
            const heading = document.getElementById("welcome-message");
            heading.innerText = "Perceptra";
        }
    </script>
</body>
</html>